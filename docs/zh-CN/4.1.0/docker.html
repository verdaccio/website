<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Docker · Verdaccio</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="![alt Docker Pulls Count](https://dockeri.co/image/verdaccio/verdaccio &quot;Docker Pulls Count&quot;)"/><meta name="docsearch:version" content="4.1.0"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Docker · Verdaccio"/><meta property="og:type" content="website"/><meta property="og:url" content="https://verdaccio.org//"/><meta property="og:description" content="![alt Docker Pulls Count](https://dockeri.co/image/verdaccio/verdaccio &quot;Docker Pulls Count&quot;)"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://verdaccio.org/blog/atom.xml" title="Verdaccio Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://verdaccio.org/blog/feed.xml" title="Verdaccio Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-2527438-21', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://codefund.io/properties/256/funder.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/logo/symbol/svg/verdaccio-tiny.svg" alt="Verdaccio"/><h2 class="headerTitleWithLogo">Verdaccio</h2></a><a href="/zh-CN/versions"><h3>4.1.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-CN/4.1.0/installation" target="_self">Docs</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://twitter.com/verdaccio_npm" target="_self">Twitter</a></li><li class=""><a href="/zh-CN/help" target="_self">Help</a></li><li class=""><a href="https://github.com/verdaccio" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/zh-CN/team" target="_self">Team</a></li><li class=""><a href="https://opencollective.com/verdaccio" target="_self">Sponsor Us</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/4.1.0/docker">English</a></li><li><a href="/docs/es-ES/4.1.0/docker">Español</a></li><li><a href="/docs/fr-FR/4.1.0/docker">Français</a></li><li><a href="/docs/it-IT/4.1.0/docker">Italiano</a></li><li><a href="/docs/sr-CS/4.1.0/docker">Serbian (Latin)</a></li><li><a href="/docs/ru-RU/4.1.0/docker">Russian</a></li><li><a href="https://crowdin.com/project/verdaccio" target="_blank" rel="noreferrer noopener">帮助翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>DevOps</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/what-is-verdaccio">What is Verdaccio?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/cli">Command Line Tool</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/who-is-using">Who is using Verdaccio?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/security-policy">Security Policy</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/logo">Logotype</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Uses Cases</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/e2e">End to End testing</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/caching">Caching strategies</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/github-actions">Github Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/linking-remote-registry">Linking a Remote Registry</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Talks &amp; Articles</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/articles">Articles</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/talks">Talks</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/configuration">Configuration File</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/uplinks">Uplinks</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/packages">Package Access</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/authentification">Authentification</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/notifications">Notifications</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/logger">Logger</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/webui">Web User Interface</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/server-configuration">Server Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/reverse-proxy">Reverse Proxy Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/ssl">Set up the SSL Certificates</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/windows">Installing As a Windows Service</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/iss-server">Installing on IIS server</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/plugins">Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/dev-plugins">Developing Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/node-api">Node API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">DevOps<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/4.1.0/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/kubernetes">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/ci">Continuous Integration</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Cloud</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/amazon">Amazon Web Services</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/ansible">Ansible</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/puppet">Puppet</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/chef">Chef Cookbook</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/best">Best Practices</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/4.1.0/protect-your-dependencies">Protecting packages</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/verdaccio/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Docker</h1></header><article><div><span><p><img src="https://dockeri.co/image/verdaccio/verdaccio" alt="alt Docker Pulls Count" title="Docker Pulls Count"></p>
<p>要下载(pull)最新的预先-创建的<a href="https://hub.docker.com/r/verdaccio/verdaccio/">docker镜像</a>：</p>
<pre><code class="hljs css language-bash">docker pull verdaccio/verdaccio
</code></pre>
<p><img src="/docs/assets/docker_verdaccio.gif" alt="Docker pull"></p>
<div id="codefund">''</div>
<h2><a class="anchor" aria-hidden="true" id="标记版本"></a><a href="#标记版本" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>标记版本</h2>
<p>自版本<code>v2.x</code>开始，您可以通过<a href="https://hub.docker.com/r/verdaccio/verdaccio/tags/">标签</a>来下载(pull)docker镜像，具体操作如下:</p>
<p>对于主版本：</p>
<pre><code class="hljs css language-bash">docker pull verdaccio/verdaccio:4
</code></pre>
<p>对于次版本：</p>
<pre><code class="hljs css language-bash">docker pull verdaccio/verdaccio:4.0
</code></pre>
<p>对于特定（补丁）版本：</p>
<pre><code class="hljs css language-bash">docker pull verdaccio/verdaccio:4.0.0
</code></pre>
<blockquote>
<p>如果您对标签列表感兴趣，<a href="https://hub.docker.com/r/verdaccio/verdaccio/tags/"> 请访问 Docker 网站枢纽</a>。</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="running-verdaccio-using-docker"></a><a href="#running-verdaccio-using-docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Verdaccio using Docker</h2>
<p>要运行docker 容器：</p>
<pre><code class="hljs css language-bash">docker run -it --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio
</code></pre>
<p>The last argument defines which image to use. The above line will pull the latest prebuilt image from dockerhub, if you haven't done that already.</p>
<p>如果您已经用 <code>verdaccio</code>作为最后参数<a href="#build-your-own-docker-image">在本地创建一个镜像</a>。</p>
<p>您可以用 <code>-v</code>来绑定安装 <code>conf</code>, <code>storage</code> 和<code>plugins</code>到主机文件系统中:</p>
<pre><code class="hljs css language-bash">V_PATH=/path/<span class="hljs-keyword">for</span>/verdaccio; docker run -it --rm --name verdaccio \
  -p 4873:4873 \
  -v <span class="hljs-variable">$V_PATH</span>/conf:/verdaccio/conf \
  -v <span class="hljs-variable">$V_PATH</span>/storage:/verdaccio/storage \
  -v <span class="hljs-variable">$V_PATH</span>/plugins:/verdaccio/plugins \
  verdaccio/verdaccio
</code></pre>
<blockquote>
<p>Note: Verdaccio runs as a non-root user (uid=10001) inside the container, if you use bind mount to override default, you need to make sure the mount directory is assigned to the right user. In above example, you need to run <code>sudo chown -R 100:101 /opt/verdaccio</code> otherwise you will get permission errors at runtime. 推荐<a href="https://docs.docker.com/storage/volumes/">使用docker卷（volume)</a>来替代绑定安装。</p>
</blockquote>
<p>Verdaccio 4 provides a new set of environment variables to modify either permissions, port or http protocol. Here the complete list:</p>
<table>
<thead>
<tr><th>属性</th><th>default</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>VERDACCIO_APPDIR</td><td><code>/opt/verdaccio-build</code></td><td>the docker working directory</td></tr>
<tr><td>VERDACCIO_USER_NAME</td><td><code>verdaccio</code></td><td>the system user</td></tr>
<tr><td>VERDACCIO_USER_UID</td><td><code>10001</code></td><td>the user id being used to apply folder permissions</td></tr>
<tr><td>VERDACCIO_PORT</td><td><code>4873</code></td><td>the verdaccio port</td></tr>
<tr><td>VERDACCIO_PROTOCOL</td><td><code>http</code></td><td>the default http protocol</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="插件"></a><a href="#插件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插件</h3>
<p>插件可以在单独的目录里安装，并用Docker或者Kubernetes挂载，然而，请确保使用与Verdaccio Dockerfile相同的基镜像的本地依赖项来创建插件。</p>
<pre><code class="hljs css language-docker"><span class="hljs-keyword">FROM</span> verdaccio/verdaccio

<span class="hljs-keyword">USER</span> root

<span class="hljs-keyword">ENV</span> NODE_ENV=production

<span class="hljs-keyword">RUN</span><span class="bash"> npm i &amp;&amp; npm install verdaccio-s3-storage</span>

<span class="hljs-keyword">USER</span> verdaccio
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="docker和自定义端口配置"></a><a href="#docker和自定义端口配置" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker和自定义端口配置</h3>
<p>Any <code>host:port</code> configured in <code>conf/config.yaml</code> under <code>listen</code> <strong>is currently ignored when using docker</strong>.</p>
<p>If you want to reach Verdaccio docker instance under different port, lets say <code>5000</code> in your <code>docker run</code> command add the environment variable <code>VERDACCIO_PORT=5000</code> and then expose the port <code>-p 5000:5000</code>.</p>
<pre><code class="hljs css language-bash">V_PATH=/path/<span class="hljs-keyword">for</span>/verdaccio; docker run -it --rm --name verdaccio \
  -e <span class="hljs-string">"VERDACCIO_PORT=8080"</span> -p 8080:8080 \  
  verdaccio/verdaccio
</code></pre>
<p>Of course the numbers you give to <code>-p</code> paremeter need to match.</p>
<h3><a class="anchor" aria-hidden="true" id="在docker中使用https"></a><a href="#在docker中使用https" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在Docker中使用HTTPS</h3>
<p>您可以配置 verdaccio 要监听的协议，类似于端口配置。 在 config.yaml里指定证书后，您必须用&quot;https&quot;覆盖<code>PROTOCOL</code> 环境变量中的默认值(&quot;http&quot;)。</p>
<pre><code class="hljs css language-bash">docker run -it --rm --name verdaccio \
  --env <span class="hljs-string">"VERDACCIO_PROTOCOL=https"</span> -p 4873:4873
  verdaccio/verdaccio
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="使用docker-compose"></a><a href="#使用docker-compose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用docker-compose</h3>
<ol>
<li>获取<a href="https://github.com/docker/compose">docker-compose</a>的最新版本。</li>
<li>创建并运行容器：</li>
</ol>
<pre><code class="hljs css language-bash">$ docker-compose up --build
</code></pre>
<p>You can set the port to use (for both container and host) by prefixing the above command with <code>VERDACCIO_PORT=5000</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.1'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">verdaccio:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">verdaccio/verdaccio</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">"verdaccio"</span>
    <span class="hljs-attr">networks:</span>

      <span class="hljs-bullet">-</span> <span class="hljs-string">node-network</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">VERDACCIO_PORT=4873</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"4873:4873"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"./storage:/verdaccio/storage"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"./config:/verdaccio/conf"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"./plugins:/verdaccio/plugins"</span>  
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">node-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p>Docker将生成一个named volume（命名卷），它用于存储持久化应用程序数据。 您可以使用<code>docker inspect</code> 或者 <code>docker volume inspect</code> 来查看此volume（卷）的物理位置并编辑配置，比如：</p>
<pre><code class="hljs css language-bash">$ docker volume inspect verdaccio_verdaccio
[
    {
        <span class="hljs-string">"Name"</span>: <span class="hljs-string">"verdaccio_verdaccio"</span>,
        <span class="hljs-string">"Driver"</span>: <span class="hljs-string">"local"</span>,
        <span class="hljs-string">"Mountpoint"</span>: <span class="hljs-string">"/var/lib/docker/volumes/verdaccio_verdaccio/_data"</span>,
        <span class="hljs-string">"Labels"</span>: null,
        <span class="hljs-string">"Scope"</span>: <span class="hljs-string">"local"</span>
    }
]

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="创建您自己的docker镜像"></a><a href="#创建您自己的docker镜像" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建您自己的Docker镜像</h2>
<pre><code class="hljs css language-bash">docker build -t verdaccio .
</code></pre>
<p>还有一个创建docker image（镜像）的npm脚本，因此您还可以执行以下操作：</p>
<pre><code class="hljs css language-bash">yarn run build:docker
</code></pre>
<p>请注意：第一个镜像的创建要花费几分钟时间，因为它需要运行<code>npm install</code>，而且，当您任何时候更改任何没有列在<code>.dockerignore</code>里的文件，它也需要运行那么长的时间。</p>
<p>请注意，您需要在您的机器上安装 docker 来执行以上任何docker命令， docker 可执行程序应该在您的<code>$PATH</code>里。</p>
<h2><a class="anchor" aria-hidden="true" id="docker示例"></a><a href="#docker示例" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker示例</h2>
<p>有个分开的 repository（资源库）承载多个配置来用 <code>verdaccio</code>生成Docker镜像，例如，reverse proxy（反向代理服务器）:</p>
<p><a href="https://github.com/verdaccio/docker-examples">https://github.com/verdaccio/docker-examples</a></p>
<h2><a class="anchor" aria-hidden="true" id="docker-自定义创建"></a><a href="#docker-自定义创建" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker 自定义创建</h2>
<blockquote>
<p>If you have made an image based on Verdaccio, feel free to add it to this list.</p>
</blockquote>
<ul>
<li><a href="https://github.com/snics/docker-verdaccio-gitlab">docker-verdaccio-gitlab</a></li>
<li><a href="https://github.com/deployable/docker-verdaccio">docker-verdaccio</a></li>
<li><a href="https://github.com/asynchrony/docker-verdaccio-s3">docker-verdaccio-s3</a> 专用 NPM 容器可以备份到s3</li>
<li><a href="https://github.com/snadn/docker-verdaccio-ldap">docker-verdaccio-ldap</a></li>
<li><a href="https://github.com/nathantreid/verdaccio-ldap">verdaccio-ldap</a></li>
<li><a href="https://github.com/shingtoli/verdaccio-compose-local-bridge">verdaccio-compose-local-bridge</a></li>
<li><a href="https://github.com/Global-Solutions/docker-verdaccio">docker-verdaccio</a></li>
<li><a href="https://github.com/idahobean/verdaccio-docker">verdaccio-docker</a></li>
<li><a href="https://github.com/andru255/verdaccio-server">verdaccio-server</a></li>
<li><a href="https://github.com/coldrye-docker/coldrye-debian-verdaccio">coldrye-debian-verdaccio</a> coldrye-debian-nodejs支持的verdaccio docker镜像。</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/4.1.0/node-api"><span class="arrow-prev">← </span><span>Node API</span></a><a class="docs-next button" href="/docs/zh-CN/4.1.0/kubernetes"><span>Kubernetes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#标记版本">标记版本</a></li><li><a href="#running-verdaccio-using-docker">Running Verdaccio using Docker</a><ul class="toc-headings"><li><a href="#插件">插件</a></li><li><a href="#docker和自定义端口配置">Docker和自定义端口配置</a></li><li><a href="#在docker中使用https">在Docker中使用HTTPS</a></li><li><a href="#使用docker-compose">使用docker-compose</a></li></ul></li><li><a href="#创建您自己的docker镜像">创建您自己的Docker镜像</a></li><li><a href="#docker示例">Docker示例</a></li><li><a href="#docker-自定义创建">Docker 自定义创建</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo/symbol/svg/verdaccio-blackwhite.svg" alt="Verdaccio" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/what-is-verdaccio.html">Getting Started</a><a href="/docs/zh-CN/docker.html">Docker</a><a href="/docs/zh-CN/configuration.html">Configuration</a><a href="/docs/zh-CN/logo">Logos</a></div><div><h5>Community</h5><a href="/zh-CN/users.html">User Showcase</a><a href="https://stackoverflow.com/search?q=verdaccio" target="_blank">Stack Overflow</a><a href="http://chat.verdaccio.org" target="_blank">Project Chat</a><a href="https://twitter.com/verdaccio_npm" target="_blank"><img alt="Follow Verdaccio on Twitter" src="https://img.shields.io/twitter/follow/verdaccio_npm.svg?label=Follow+Verdaccio&amp;style=social"/></a></div><div><h5>More</h5><a href="https://medium.com/verdaccio" target="_blank">Blog</a><a href="https://github.com/verdaccio" target="_blank">GitHub</a><a class="github-button" href="https://github.com/verdaccio/verdaccio" data-icon="octicon-star" data-count-href="/verdaccio/verdaccio/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a8b4d117e513cd8d71d6a95e3d9d4a91',
                indexName: 'verdaccio',
                inputSelector: '#search_input_react'
              });
            </script></body></html>